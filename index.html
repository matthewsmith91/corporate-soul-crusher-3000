<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Corporate Soul Crusher 3000™</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600;700&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'JetBrains Mono', monospace;
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: #ecf0f1;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 0;
            overflow-x: hidden;
        }

        .window-controls {
            width: 100%;
            background: #34495e;
            padding: 10px 20px;
            display: flex;
            align-items: center;
            border-bottom: 2px solid #2c3e50;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .minimize-btn {
            background: #e74c3c;
            color: white;
            border: none;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            font-size: 1.5rem;
            font-weight: bold;
            cursor: pointer;
            margin-right: 15px;
        }

        .window-title {
            color: #ecf0f1;
            font-weight: 600;
            font-size: 0.9rem;
        }

        #game-container {
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .title {
            font-size: 2.5rem;
            color: #e74c3c;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
            margin-bottom: 10px;
        }

        .subtitle {
            font-size: 1rem;
            color: #95a5a6;
            font-style: italic;
        }

        .slot-machine {
            background: linear-gradient(145deg, #34495e, #2c3e50);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
            margin-bottom: 30px;
            border: 3px solid #e74c3c;
        }

        .reels-container {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
            justify-content: center;
        }

        .reel {
            width: 120px;
            height: 120px;
            background: #1a252f;
            border: 3px solid #3498db;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .reel.spinning {
            animation: spin 0.1s linear infinite;
        }

        @keyframes spin {
            0% {
                transform: rotateY(0deg);
            }

            100% {
                transform: rotateY(360deg);
            }
        }

        .spin-button {
            background: linear-gradient(145deg, #e74c3c, #c0392b);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.2rem;
            font-weight: 700;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            font-family: inherit;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(231, 76, 60, 0.3);
        }

        .spin-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(231, 76, 60, 0.4);
        }

        .spin-button:disabled {
            background: #7f8c8d;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .result-area {
            min-height: 100px;
            background: rgba(52, 73, 94, 0.8);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            border-left: 5px solid #3498db;
        }

        .result-text {
            font-size: 1rem;
            line-height: 1.6;
            color: #ecf0f1;
        }

        .stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            width: 100%;
            max-width: 800px;
        }

        .stat-card {
            background: rgba(52, 73, 94, 0.9);
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            border: 2px solid #34495e;
        }

        .stat-title {
            font-size: 0.9rem;
            color: #95a5a6;
            margin-bottom: 10px;
            text-transform: uppercase;
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: #e74c3c;
        }

        .progress-bar {
            width: 100%;
            height: 20px;
            background: #2c3e50;
            border-radius: 10px;
            overflow: hidden;
            margin-top: 10px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #f39c12, #e74c3c);
            border-radius: 10px;
            transition: width 0.5s ease;
            position: relative;
        }

        .buzzword-list {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 10px;
        }

        .buzzword {
            background: #e74c3c;
            color: white;
            padding: 4px 8px;
            border-radius: 15px;
            font-size: 0.7rem;
            font-weight: 600;
        }

        .free-spins-indicator {
            background: linear-gradient(145deg, #f39c12, #d68910);
            color: white;
            padding: 10px 20px;
            border-radius: 20px;
            font-weight: 700;
            margin-bottom: 15px;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {

            0%,
            100% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.05);
            }
        }

        .popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(145deg, #2c3e50, #34495e);
            border: 3px solid #e74c3c;
            border-radius: 15px;
            padding: 30px;
            max-width: 400px;
            z-index: 1000;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
        }

        .popup-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 999;
        }

        .popup-title {
            color: #e74c3c;
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 15px;
            text-align: center;
        }

        .popup-text {
            color: #ecf0f1;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .popup-close {
            background: #3498db;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-family: inherit;
            display: block;
            margin: 0 auto;
        }

        @media (max-width: 768px) {
            .title {
                font-size: 1.8rem;
            }

            .reels-container {
                gap: 10px;
            }

            .reel {
                width: 90px;
                height: 90px;
                font-size: 2.2rem;
            }

            .stats-container {
                grid-template-columns: 1fr;
            }
        }

        /* Desktop Environment Styles */
        #desktop {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: linear-gradient(45deg, #2c3e50, #34495e);
            z-index: 200;
        }

        .desktop-wallpaper {
            width: 100%;
            height: 100%;
            background-image:
                radial-gradient(circle at 20% 50%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255, 119, 198, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 40% 80%, rgba(120, 200, 255, 0.3) 0%, transparent 50%);
            position: relative;
            padding: 20px;
        }

        .desktop-icons {
            display: grid;
            grid-template-columns: repeat(auto-fill, 100px);
            gap: 20px;
            margin-top: 50px;
        }

        .desktop-icon {
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
            padding: 10px;
            border-radius: 8px;
            transition: background 0.2s;
            position: relative;
        }

        .desktop-icon:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .icon {
            font-size: 2.5rem;
            margin-bottom: 5px;
        }

        .icon-label {
            font-size: 0.7rem;
            color: #ecf0f1;
            text-align: center;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.7);
        }

        .blink-indicator {
            position: absolute;
            top: 5px;
            right: 5px;
            width: 12px;
            height: 12px;
            background: #e74c3c;
            border-radius: 50%;
            animation: blink 1s infinite;
        }

        @keyframes blink {

            0%,
            50% {
                opacity: 1;
            }

            51%,
            100% {
                opacity: 0;
            }
        }

        .taskbar {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 60px;
            background: rgba(52, 73, 94, 0.95);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 20px;
            border-top: 2px solid #2c3e50;
        }

        .productivity-tracker {
            background: rgba(231, 76, 60, 0.9);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            animation: productivity-flicker 3s infinite;
        }

        @keyframes productivity-flicker {

            0%,
            30% {
                background: rgba(231, 76, 60, 0.9);
            }

            31%,
            60% {
                background: rgba(243, 156, 18, 0.9);
            }

            61%,
            100% {
                background: rgba(46, 204, 113, 0.9);
            }
        }

        .taskbar-time {
            color: #ecf0f1;
            font-weight: 600;
        }

        .restore-btn {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(145deg, #3498db, #2980b9);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 1.1rem;
            font-weight: 700;
            border-radius: 10px;
            cursor: pointer;
            font-family: inherit;
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }

        .restore-btn:hover {
            transform: translate(-50%, -50%) translateY(-2px);
            box-shadow: 0 8px 20px rgba(52, 152, 219, 0.4);
        }

        /* Corporate Popup Styles */
        .corporate-popup {
            position: fixed;
            background: linear-gradient(145deg, #ecf0f1, #bdc3c7);
            border: 2px solid #34495e;
            border-radius: 8px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
            z-index: 1000;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            color: #2c3e50;
            min-width: 300px;
            max-width: 400px;
        }

        .popup-header {
            background: linear-gradient(145deg, #3498db, #2980b9);
            color: white;
            padding: 8px 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.9rem;
            font-weight: 600;
        }

        .popup-close-x {
            background: #e74c3c;
            color: white;
            border: none;
            width: 20px;
            height: 20px;
            border-radius: 3px;
            cursor: pointer;
            font-size: 0.8rem;
        }

        .popup-content {
            padding: 20px;
            line-height: 1.5;
        }

        .popup-buttons {
            padding: 10px 20px;
            display: flex;
            gap: 10px;
            justify-content: flex-end;
            background: #ecf0f1;
            border-top: 1px solid #bdc3c7;
        }

        .popup-btn {
            background: #3498db;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.8rem;
        }

        .popup-btn.cancel {
            background: #95a5a6;
        }

        .notification-popup {
            top: 20px;
            right: 20px;
            animation: slideInRight 0.5s ease;
        }

        @keyframes slideInRight {
            from {
                transform: translateX(100%);
            }

            to {
                transform: translateX(0);
            }
        }
    </style>
</head>

<body>
    <div class="window-controls">
        <button class="minimize-btn" onclick="toggleDesktop()">−</button>
        <span class="window-title">Corporate Soul Crusher 3000™</span>
    </div>
    </div>

    <!-- Fake Desktop Environment -->
    <div id="desktop" style="display: none;">
        <div class="desktop-wallpaper">
            <div class="desktop-icons">
                <div class="desktop-icon">
                    <div class="icon">📧</div>
                    <div class="icon-label">Gmail (47)</div>
                </div>
                <div class="desktop-icon">
                    <div class="icon">🟢</div>
                    <div class="icon-label">Slack Huddle</div>
                    <div class="blink-indicator"></div>
                </div>
                <div class="desktop-icon" ondblclick="openFakeMetricsPopup()">
                    <div class="icon">📊</div>
                    <div class="icon-label" id="metrics-label">...</div>
                </div>
                <div class="desktop-icon">
                    <div class="icon">⚠️</div>
                    <div class="icon-label">Compliance Training (OVERDUE)</div>
                </div>
                <div class="desktop-icon" ondblclick="toggleDesktop()">
                    <div class="icon">🎰</div>
                    <div class="icon-label">Soul Crusher 3000</div>
                </div>
            </div>

            <div class="taskbar">
                <div class="productivity-tracker">
                    <span id="productivity-text">Efficiency: 94% 📈</span>
                </div>
                <button onclick="endCorporateDay()"
                    style="background:none; border:none; color:#ecf0f1; font-size:0.8rem; cursor:pointer;">🛑 Clock
                    Out</button>
                <div class="taskbar-time" id="taskbar-time">2:47 PM</div>
            </div>

            <!-- <button class="restore-btn" onclick="toggleDesktop()">Restore Game</button> -->
        </div>
    </div>

    <!-- Corporate Popup Windows -->
    <div id="popup-container"></div>

    <div id="game-container">
        <div class="header">
            <h1 class="title">Corporate Soul Crusher 3000™</h1>
            <p class="subtitle">"Maximizing Synergy Through Gamified Despair"</p>
        </div>

        <div class="slot-machine">
            <div id="free-spins-indicator" class="free-spins-indicator" style="display: none;">
                🎉 FREE FORCED FUN SPINS: <span id="free-spins-count">0</span>
            </div>

            <div class="reels-container">
                <div class="reel" id="reel1">🧑‍💼</div>
                <div class="reel" id="reel2">☕️</div>
                <div class="reel" id="reel3">🐢</div>
            </div>

            <div style="text-align: center;">
                <button class="spin-button" id="spin-btn" onclick="spin()">
                    MAXIMIZE SYNERGY
                </button>
            </div>

            <div class="result-area">
                <div class="result-text" id="result-text">
                    Welcome back to the office! We saved your cubicle. And removed the sunlight.
                    <br><br>Ready to spin? Remember: productivity is a mindset, not a measurable outcome!
                </div>
            </div>
        </div>

        <div class="stats-container">
            <div class="stat-card">
                <div class="stat-title">Burnout Meter</div>
                <div class="stat-value" id="burnout-score">0%</div>
                <div class="progress-bar">
                    <div class="progress-fill" id="burnout-progress" style="width: 0%"></div>
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-title">Fake Productivity Score</div>
                <div class="stat-value" id="productivity-score">0</div>
            </div>

            <div class="stat-card">
                <div class="stat-title">Spins Completed</div>
                <div class="stat-value" id="spins-count">0</div>
            </div>

            <div class="stat-card">
                <div class="stat-title">Buzzword Collection</div>
                <div class="stat-value" id="buzzword-count">0</div>
                <div class="buzzword-list" id="buzzword-list"></div>
            </div>
        </div>

        <script>
            const symbols = [
                '🧑‍💼', '☕️', '🐢', '📅', '👔', '🚨', '🧠', '📉', '📤', '🪑'
            ];

            const rareSymbols = ['🏖', '🧙‍♂️', '💀'];

            const buzzwords = [
                'synergy', 'bandwidth', 'low-hanging fruit', 'circle back', 'touch base',
                'deep dive', 'move the needle', 'paradigm shift', 'actionable insights',
                'best practices', 'core competencies', 'deliverables', 'scalable solutions'
            ];

            let gameState = {
                burnout: 0,
                productivity: 0,
                spins: 0,
                collectedBuzzwords: new Set(),
                freeSpins: 0,
                isSpinning: false,
                isDesktopMode: false,
                activePopups: new Set()
            };

            const productivityTexts = [
                "Efficiency: 94% 📈",
                "Efficiency: 12% 📉",
                "Synergy: Moderate 🤝",
                "Bandwidth: Saturated 🚫",
                "Optimization: Pending ⏳",
                "Innovation: Disrupted 💡",
                "Alignment: Misaligned ❌",
                "Velocity: Decelerating 🐌",
                "Scalability: Questionable 📊",
                "Engagement: Declined 📉",
                "Deliverables: Delayed ⏰",
                "ROI: Calculating... 🤔",
                "KPIs: Below Threshold 📊",
                "Agility: Rigid 🏗️",
                "Pivot: In Progress 🔄"
            ];

            const corporatePopups = [
                {
                    title: "Kitchen Update",
                    message: "Reminder: Office kitchen now has oat milk only. Please adjust your morale accordingly. Regular milk has been deemed 'insufficiently sustainable' by the Wellness Committee.",
                    buttons: ["Acknowledge", "File Complaint"]
                },
                {
                    title: "Compliance Training Required",
                    message: "URGENT: You have 47 overdue compliance training modules. Click 'Complete' to pretend you read them. Estimated time: 'Just 5 minutes' (Actually 3 hours).",
                    buttons: ["Complete", "Remind Me Later"]
                },
                {
                    title: "Desk Space Optimization",
                    message: "Great news! We've optimized your desk space by removing it entirely. You now have a 'flexible collaboration zone' (standing room only). Productivity is expected to increase by 200%.",
                    buttons: ["Embrace Change", "Cry Silently"]
                },
                {
                    title: "Mandatory Wellness Survey",
                    message: "How happy are you at work? (Scale: 1-10, where anything below 8 triggers immediate intervention and a conversation with your manager about your 'attitude').",
                    buttons: ["I'm Thriving! (10)", "Help Me"]
                },
                {
                    title: "Team Building Alert",
                    message: "Congratulations! You've been selected for tomorrow's 6 AM trust fall exercises in the parking lot. Participation is voluntary but your performance review depends on it.",
                    buttons: ["Can't Wait!", "Fake Injury"]
                },
                {
                    title: "Parking Update",
                    message: "Important: All parking spots have been converted to 'Executive Visitor Parking.' Employees are encouraged to 'think outside the box' for transportation solutions. May we suggest walking from the next zip code?",
                    buttons: ["Innovative!", "Quit"]
                },
                {
                    title: "Coffee Machine Status",
                    message: "The coffee machine is 'temporarily' out of order (since 2019). Please use the 'artisanal' hot water dispenser and bring your own coffee grounds. Productivity increases of 0.001% expected.",
                    buttons: ["Adapt", "Revolt"]
                },
                {
                    title: "Open Office Update",
                    message: "We've removed all cubicle walls to 'foster collaboration.' Your new workspace is 2.3 square feet. Studies show that constant interruption boosts creativity by making you hallucinate solutions.",
                    buttons: ["Synergy!", "Hide in Bathroom"]
                },
                {
                    title: "AI Assistant Deployment",
                    message: "Meet your new AI coworker! It will handle all your tasks while you focus on 'strategic thinking' (looking busy). Don't worry, your job is totally secure. Probably.",
                    buttons: ["Welcome AI!", "Update Resume"]
                },
                {
                    title: "Vacation Policy Update",
                    message: "Good news! We now offer 'unlimited PTO'! (Unlimited requests to work through your vacation). Remember: taking time off shows lack of commitment to our family values.",
                    buttons: ["Best Company Ever!", "Sob Quietly"]
                }
            ];

            // Desktop and popup functions
            function toggleDesktop() {
                gameState.isDesktopMode = !gameState.isDesktopMode;
                const desktop = document.getElementById('desktop');
                const gameContainer = document.getElementById('game-container');

                if (gameState.isDesktopMode) {
                    desktop.style.display = 'block';
                    gameContainer.style.display = 'none';
                    startProductivityTracker();

                    // Random chance to spawn corporate popups
                    setTimeout(() => {
                        if (Math.random() < 0.7) spawnCorporatePopup();
                    }, 2000);

                    // More popups over time
                    setTimeout(() => {
                        if (Math.random() < 0.5) spawnCorporatePopup();
                    }, 5000);
                } else {
                    desktop.style.display = 'none';
                    gameContainer.style.display = 'flex';
                    stopProductivityTracker();
                    clearAllPopups();
                }
            }

            let productivityInterval;
            function startProductivityTracker() {
                const tracker = document.getElementById('productivity-text');
                let index = 0;

                productivityInterval = setInterval(() => {
                    tracker.textContent = productivityTexts[index];
                    index = (index + 1) % productivityTexts.length;
                }, 2000);

                // Update time
                updateTaskbarTime();
                setInterval(updateTaskbarTime, 1000);
            }

            function stopProductivityTracker() {
                if (productivityInterval) {
                    clearInterval(productivityInterval);
                }
            }

            function updateTaskbarTime() {
                const now = new Date();
                const time = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
                const timeElement = document.getElementById('taskbar-time');
                if (timeElement) {
                    timeElement.textContent = time;
                }
            }

            function spawnCorporatePopup() {
                if (!gameState.isDesktopMode) return;

                const popup = corporatePopups[Math.floor(Math.random() * corporatePopups.length)];
                const popupId = 'popup-' + Date.now();

                const popupElement = document.createElement('div');
                popupElement.id = popupId;
                popupElement.className = 'corporate-popup notification-popup';
                popupElement.style.top = Math.random() * 300 + 50 + 'px';
                popupElement.style.right = Math.random() * 200 + 20 + 'px';

                const buttonsHtml = popup.buttons.map(btn =>
                    `<button class="popup-btn" onclick="handlePopupButton('${popupId}', '${btn}')">${btn}</button>`
                ).join('');

                popupElement.innerHTML = `
                <div class="popup-header">
                    <span>${popup.title}</span>
                    <button class="popup-close-x" onclick="closePopup('${popupId}')">×</button>
                </div>
                <div class="popup-content">${popup.message}</div>
                <div class="popup-buttons">${buttonsHtml}</div>
            `;

                document.getElementById('popup-container').appendChild(popupElement);
                gameState.activePopups.add(popupId);

                // Auto-close after 10 seconds
                setTimeout(() => {
                    closePopup(popupId);
                }, 10000);
            }

            function closePopup(popupId) {
                const popup = document.getElementById(popupId);
                if (popup) {
                    popup.remove();
                    gameState.activePopups.delete(popupId);
                }
            }

            function clearAllPopups() {
                gameState.activePopups.forEach(popupId => {
                    closePopup(popupId);
                });
            }

            function handlePopupAction(popupId, action) {
                // Add some burnout based on the action
                const burnoutActions = {
                    'Acknowledge': 5,
                    'Complete': 10,
                    'Embrace Change': 15,
                    'I\'m Thriving! (10)': 20,
                    'Can\'t Wait!': 25,
                    'Innovative!': 10,
                    'Adapt': 8,
                    'Synergy!': 12,
                    'Welcome AI!': 30,
                    'Best Company Ever!': 35
                };

                const burnoutIncrease = burnoutActions[action] || 5;
                gameState.burnout += burnoutIncrease;

                // Add relevant buzzwords
                const buzzwordActions = {
                    'Embrace Change': 'adaptability',
                    'Synergy!': 'collaboration',
                    'Innovative!': 'innovation',
                    'Welcome AI!': 'digital-transformation',
                    'Complete': 'compliance'
                };

                if (buzzwordActions[action]) {
                    gameState.collectedBuzzwords.add(buzzwordActions[action]);
                }

                updateDisplay();
                closePopup(popupId);

                // Sometimes spawn another popup
                if (Math.random() < 0.3) {
                    setTimeout(() => spawnCorporatePopup(), 2000);
                }
            }

            const outcomes = {
                '🧑‍💼🧑‍💼🧑‍💼': {
                    title: "TRIPLE MIDDLE MANAGEMENT!",
                    message: "Congratulations! You've earned three new project managers who will each ask for the same status update separately. Your bandwidth has been thoroughly optimized!",
                    burnout: 25,
                    productivity: 0,
                    buzzword: 'bandwidth',
                    freeSpins: 2
                },
                '☕️☕️☕️': {
                    title: "CAFFEINE OVERDOSE ACHIEVEMENT!",
                    message: "You've consumed enough burnt office coffee to power a small server farm. Your hands shake, but at least you're 'energized' for today's 4-hour budget review meeting!",
                    burnout: 15,
                    productivity: 5,
                    buzzword: 'energized'
                },
                '🐢🐢🐢': {
                    title: "VPN VELOCITY AWARD!",
                    message: "Your internet connection is now moving at the speed of corporate decision-making. You spent 90% of your day watching loading screens. Somehow, you're still behind on deliverables.",
                    burnout: 20,
                    productivity: -10,
                    buzzword: 'deliverables'
                },
                '📅📅📅': {
                    title: "MEETING MARATHON CHAMPION!",
                    message: "You've unlocked the ultimate achievement: back-to-back meetings about scheduling meetings to discuss the meeting agenda. Your calendar is now quantum entangled with despair.",
                    burnout: 30,
                    productivity: -5,
                    buzzword: 'synergy',
                    freeSpins: 3
                },
                '👔👔👔': {
                    title: "BUSINESS CASUAL CONFORMITY!",
                    message: "Perfect! You've achieved maximum professional bland-ness. Your personality has been successfully compressed into khakis and a polo shirt. HR approves of your 'authentic self.'",
                    burnout: 10,
                    productivity: 2,
                    buzzword: 'authentic'
                },
                '🚨🚨🚨': {
                    title: "SLACK NOTIFICATION OVERLOAD!",
                    message: "Ding! Ding! Ding! You've been added to 47 new channels. None of them are relevant to your job, but ignoring them would show 'lack of engagement.' Your cortisol levels are now enterprise-grade!",
                    burnout: 35,
                    productivity: -15,
                    buzzword: 'engagement'
                },
                '💀💀💀': {
                    title: "FAMILY CULTURE UNLOCKED!",
                    message: "🚨 CRITICAL HIT! 🚨 'We're like a family here!' Translation: unpaid overtime is now a family tradition. All your progress has been reset because families don't track productivity metrics!",
                    burnout: 100,
                    productivity: -50,
                    buzzword: 'family-culture',
                    resetProgress: true
                },
                '🏖🏖🏖': {
                    title: "PTO MIRACLE!",
                    message: "IMPOSSIBLE! Your PTO request was approved! (Only after 3 escalations, 2 meetings, and a signed affidavit promising to check Slack while on vacation.) Burnout reduced slightly!",
                    burnout: -20,
                    productivity: 15,
                    buzzword: 'work-life-balance'
                },
                '🧙‍♂️🧙‍♂️🧙‍♂️': {
                    title: "SENIOR DEV WISDOM!",
                    message: "You found the legendary Senior Developer Who Knows Where Everything Is! They've shared the ancient knowledge of 'where the documentation actually lives' and 'why the build server is named after a cat.'",
                    burnout: -10,
                    productivity: 25,
                    buzzword: 'knowledge-transfer'
                }
            };

            function getRandomSymbol() {
                // 5% chance for rare symbols
                if (Math.random() < 0.05) {
                    return rareSymbols[Math.floor(Math.random() * rareSymbols.length)];
                }
                return symbols[Math.floor(Math.random() * symbols.length)];
            }

            function updateDisplay() {
                document.getElementById('burnout-score').textContent = Math.min(gameState.burnout, 100) + '%';
                document.getElementById('burnout-progress').style.width = Math.min(gameState.burnout, 100) + '%';
                document.getElementById('productivity-score').textContent = gameState.productivity;
                document.getElementById('spins-count').textContent = gameState.spins;
                document.getElementById('buzzword-count').textContent = gameState.collectedBuzzwords.size;

                // Update buzzword display
                const buzzwordList = document.getElementById('buzzword-list');
                buzzwordList.innerHTML = '';
                Array.from(gameState.collectedBuzzwords).forEach(word => {
                    const span = document.createElement('span');
                    span.className = 'buzzword';
                    span.textContent = word;
                    buzzwordList.appendChild(span);
                });

                // Update free spins
                const indicator = document.getElementById('free-spins-indicator');
                const count = document.getElementById('free-spins-count');
                if (gameState.freeSpins > 0) {
                    indicator.style.display = 'block';
                    count.textContent = gameState.freeSpins;
                } else {
                    indicator.style.display = 'none';
                }
            }

            function addBuzzword(word) {
                gameState.collectedBuzzwords.add(word);
            }

            function showPopup(title, message) {
                const overlay = document.createElement('div');
                overlay.className = 'popup-overlay';

                const popup = document.createElement('div');
                popup.className = 'popup';
                popup.innerHTML = `
                <div class="popup-title">${title}</div>
                <div class="popup-text">${message}</div>
                <button class="popup-close" onclick="closePopup()">Continue Suffering</button>
            `;

                document.body.appendChild(overlay);
                document.body.appendChild(popup);

                window.currentPopup = { overlay, popup };
            }

            function closePopup() {
                if (window.currentPopup) {
                    document.body.removeChild(window.currentPopup.overlay);
                    document.body.removeChild(window.currentPopup.popup);
                    window.currentPopup = null;
                }
            }

            function spin() {
                if (gameState.isSpinning) return;

                gameState.isSpinning = true;
                const spinBtn = document.getElementById('spin-btn');
                spinBtn.disabled = true;
                spinBtn.textContent = 'OPTIMIZING...';

                // Add spinning animation
                const reels = [document.getElementById('reel1'), document.getElementById('reel2'), document.getElementById('reel3')];
                reels.forEach(reel => reel.classList.add('spinning'));

                // Spin animation
                let spinCount = 0;
                const spinInterval = setInterval(() => {
                    reels.forEach(reel => {
                        reel.textContent = getRandomSymbol();
                    });
                    spinCount++;

                    if (spinCount > 20) {
                        clearInterval(spinInterval);
                        finalizeSpin();
                    }
                }, 100);
            }

            function finalizeSpin() {
                const reels = [document.getElementById('reel1'), document.getElementById('reel2'), document.getElementById('reel3')];

                // Remove spinning animation
                reels.forEach(reel => reel.classList.remove('spinning'));

                // Set final symbols
                const finalSymbols = [getRandomSymbol(), getRandomSymbol(), getRandomSymbol()];
                reels.forEach((reel, index) => {
                    reel.textContent = finalSymbols[index];
                });

                // Check for matches
                const result = finalSymbols.join('');
                processResult(result, finalSymbols);

                // Update game state
                gameState.spins++;
                if (gameState.freeSpins > 0) {
                    gameState.freeSpins--;
                }

                // Always increase baseline burnout
                gameState.burnout += Math.floor(Math.random() * 5) + 3;
                gameState.productivity += Math.floor(Math.random() * 3) - 1;

                // Random events
                if (Math.random() < 0.1) {
                    triggerRandomEvent();
                }

                // Check for free spin triggers
                checkFreeSpinTriggers(finalSymbols);

                updateDisplay();

                // Re-enable button
                const spinBtn = document.getElementById('spin-btn');
                spinBtn.disabled = false;
                spinBtn.textContent = gameState.freeSpins > 0 ? 'USE FORCED FUN SPIN' : 'MAXIMIZE SYNERGY';
                gameState.isSpinning = false;

                // Burnout warnings
                if (gameState.burnout >= 100) {
                    setTimeout(() => {
                        showPopup('🔥 MAXIMUM BURNOUT ACHIEVED! 🔥', 'Congratulations! You\'ve reached peak corporate optimization. Your soul has been successfully converted to quarterly metrics. Please continue playing - remember, there\'s no such thing as work-life balance, only work-work balance!');
                    }, 1000);
                }
            }

            function processResult(result, symbols) {
                const resultText = document.getElementById('result-text');

                if (outcomes[result]) {
                    const outcome = outcomes[result];
                    resultText.innerHTML = `<strong>${outcome.title}</strong><br><br>${outcome.message}`;

                    if (outcome.resetProgress) {
                        gameState.burnout = 100;
                        gameState.productivity = Math.max(0, gameState.productivity + outcome.productivity);
                    } else {
                        gameState.burnout += outcome.burnout;
                        gameState.productivity += outcome.productivity;
                    }

                    if (outcome.buzzword) {
                        addBuzzword(outcome.buzzword);
                    }

                    if (outcome.freeSpins) {
                        gameState.freeSpins += outcome.freeSpins;
                    }
                } else {
                    // Default outcomes for non-matching combinations
                    const defaultOutcomes = [
                        "Another day, another dollar! (The dollar goes to shareholder value, not you.)",
                        "You've successfully existed in the office space. Your participation trophy is being processed by HR.",
                        "Congratulations on your continued employment! Your job security increases by 0.001%.",
                        "Today's achievement: You didn't quit! Leadership is proud of your 'resilience mindset.'",
                        "Mixed results! Like your quarterly performance review, it's neither good nor bad, just... adequate.",
                        "You've earned exposure! Unfortunately, it's just exposure to more corporate buzzwords.",
                        "Your contribution has been noted! (In a database that nobody checks.)",
                        "Success! You've demonstrated core competencies in slot machine operation. This skill is not transferable."
                    ];

                    resultText.innerHTML = defaultOutcomes[Math.floor(Math.random() * defaultOutcomes.length)];

                    // Random buzzword chance
                    if (Math.random() < 0.3) {
                        const randomBuzzword = buzzwords[Math.floor(Math.random() * buzzwords.length)];
                        addBuzzword(randomBuzzword);
                    }
                }
            }

            function checkFreeSpinTriggers(symbols) {
                // Free spin triggers
                const coffeeCount = symbols.filter(s => s === '☕️').length;
                const slackCount = symbols.filter(s => s === '🚨').length;
                const meetingCount = symbols.filter(s => s === '📅').length;

                if (coffeeCount >= 2 && slackCount >= 1) {
                    gameState.freeSpins += 2;
                    setTimeout(() => {
                        showPopup('☕️ CAFFEINE OVERLOAD BONUS! 🚨', 'Your coffee addiction has triggered our wellness protocol! Here are 2 Forced Fun Spins to help you relax. (Spoiler: they won\'t.)');
                    }, 1500);
                }

                if (meetingCount >= 2) {
                    gameState.freeSpins += 3;
                    setTimeout(() => {
                        showPopup('📅 MEETING OVERLOAD DETECTED! 📅', 'Our AI detected you need more work-life balance! Please accept these 3 mandatory fun spins. Participation is voluntary but required.');
                    }, 1500);
                }
            }

            function handlePopupButton(popupId, action) {
                // Add some burnout based on the action
                const burnoutActions = {
                    'Acknowledge': 5,
                    'Complete': 10,
                    'Embrace Change': 15,
                    'I\'m Thriving! (10)': 20,
                    'Can\'t Wait!': 25,
                    'Innovative!': 10,
                    'Adapt': 8,
                    'Synergy!': 12,
                    'Welcome AI!': 30,
                    'Best Company Ever!': 35
                };

                const burnoutIncrease = burnoutActions[action] || 5;
                gameState.burnout += burnoutIncrease;

                updateDisplay();
                closePopup(popupId);

                // Sometimes spawn another popup
                if (Math.random() < 0.3) {
                    setTimeout(() => spawnCorporatePopup(), 2000);
                }
            }

            function endCorporateDay() {
                showPopup("🛑 Clocking Out Not Authorized", "Your manager has flagged this action as 'premature disengagement.' Please attend 3 more mandatory fun events before exiting.");
            }

            function getCurrentQuarterFileName() {
                const now = new Date();
                const quarter = Math.floor(now.getMonth() / 3) + 1;
                const year = now.getFullYear();
                return `Q${quarter}_Metrics.xlsx`;
            }

            function openFakeMetricsPopup() {
                const fileName = getCurrentQuarterFileName();

                const overlay = document.createElement('div');
                overlay.className = 'popup-overlay';

                const popup = document.createElement('div');
                popup.className = 'popup';
                popup.style.maxWidth = '600px';
                popup.innerHTML = `
        <div class="popup-title">${fileName}</div>
        <div class="popup-text">
            <canvas id="chaosChart" width="500" height="250" style="background:#ecf0f1; border-radius:10px;"></canvas>
            <br>
            <em>*All data derived from vibes, approximations, and post-it notes.</em>
        </div>
        <button class="popup-close" onclick="closePopup()">Acknowledge KPIs</button>
    `;

                document.body.appendChild(overlay);
                document.body.appendChild(popup);

                window.currentPopup = { overlay, popup };

                setTimeout(drawChaosChart, 100);
            }

            function drawChaosChart() {
                const canvas = document.getElementById('chaosChart');
                if (!canvas) return;
                const ctx = canvas.getContext('2d');

                const labels = ['Synergy', 'Morale', 'Pivot Count', 'Q3 Wins', 'Burnout Ratio', 'Engagement'];
                const colors = ['#e74c3c', '#f39c12', '#3498db', '#2ecc71', '#9b59b6', '#1abc9c'];
                const values = labels.map(() => Math.floor(Math.random() * 100 + 1));

                // Bar chart
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                const barWidth = 60;
                const spacing = 20;
                const maxBarHeight = 180;

                values.forEach((val, i) => {
                    const x = i * (barWidth + spacing) + 20;
                    const barHeight = (val / 100) * maxBarHeight;
                    ctx.fillStyle = colors[i];
                    ctx.fillRect(x, canvas.height - barHeight - 30, barWidth, barHeight);

                    ctx.fillStyle = '#2c3e50';
                    ctx.font = '12px JetBrains Mono';
                    ctx.fillText(labels[i], x, canvas.height - 10);
                });
            }

            function triggerRandomEvent() {
                const events = [
                    {
                        title: "🤖 AI PERFORMANCE REVIEW",
                        message: "Our algorithm noticed you haven't shown initiative this fiscal quarter. Please increase your proactive collaboration metrics by touching base with more stakeholders.",
                        effect: () => { gameState.burnout += 15; addBuzzword('proactive'); }
                    },
                    {
                        title: "📋 HR WELLNESS CHECK",
                        message: "Hi there! Just checking in on your mental health! Please rate your job satisfaction from 1-10. (Anything below 8 triggers a mandatory wellness seminar.)",
                        effect: () => { gameState.burnout += 10; addBuzzword('wellness'); }
                    },
                    {
                        title: "🎉 MANDATORY FUN ALERT",
                        message: "Great news! You've been voluntold to join tonight's virtual team building escape room! It starts at 7 PM and ends when morale improves.",
                        effect: () => { gameState.burnout += 20; addBuzzword('team-building'); }
                    },
                    {
                        title: "📊 PRODUCTIVITY INSIGHT",
                        message: "Our analytics show you're 12% less productive than the office plant. The plant has been promoted to Senior Leaf Specialist.",
                        effect: () => { gameState.productivity -= 5; addBuzzword('analytics'); }
                    }
                ];

                const event = events[Math.floor(Math.random() * events.length)];
                event.effect();

                setTimeout(() => {
                    showPopup(event.title, event.message);
                }, 500);
            }

            // Initialize display
            updateDisplay();

            // Easter egg: Konami code for extra despair
            let konamiCode = [];
            const konami = [38, 38, 40, 40, 37, 39, 37, 39, 66, 65];

            document.addEventListener('DOMContentLoaded', () => {
                const label = document.getElementById('metrics-label');
                if (label) {
                    label.textContent = getCurrentQuarterFileName();
                }
            });

            document.addEventListener('keydown', (e) => {
                konamiCode.push(e.keyCode);
                if (konamiCode.length > konami.length) {
                    konamiCode.shift();
                }

                if (konamiCode.join(',') === konami.join(',')) {
                    showPopup('🎮 CHEAT CODE ACTIVATED!', 'You found the secret code! Unfortunately, there are no cheats in corporate life. Your reward is the realization that even in games, you can\'t escape the system. Have 5 free spins of existential dread!');
                    gameState.freeSpins += 5;
                    gameState.burnout += 30;
                    addBuzzword('easter-egg');
                    updateDisplay();
                    konamiCode = [];
                }
            });
        </script>
</body>

</html>